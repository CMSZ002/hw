[build]
  command = """
    npx html-minifier-terser index.html \
      -o index.html \
      --collapse-whitespace \
      --remove-comments \
      --minify-js \
      --minify-css && \
    (test -f sw.js && npx terser sw.js --compress --mangle -o sw.js || echo 'no sw.js')
  """
  publish = "."

# HTML/MD：不缓存，方便更新
[[headers]]
  for = "/*.(html|md)"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# 图片/字体：长缓存
[[headers]]
  for = "/*.(png|jpg|jpeg|gif|svg|webp|ico|woff2)"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
